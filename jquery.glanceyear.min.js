!function(a){a.fn.glanceyear=function(b,c){function x(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in b)c.setAttribute(d,b[d]);return c}function y(b){var c=0;for(var f in b)d.find('rect.day[data-date="'+b[f].date+'"]').attr("data-count",b[f].value),c+=parseInt(b[f].value);a(e.targetQuantity).text(b.length+" days, "+c+" scores")}function z(a){return e.months[a]}function A(a){return e.weeks[a]}function B(a){return z(a.getMonth())+" "+a.getDate()+", "+a.getFullYear()}for(var j,d=a(this),e=a.extend({eventClick:function(a){alert("Date: "+a.date+", Count:"+a.count)},months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weeks:["M","T","W","T","F","S","S"],targetQuantity:".glanceyear-quantity",tagId:"glanceyear-svgTag",showToday:!1},c),f=x("svg",{width:663,height:99}),g=x("g",{transform:"translate(15, 15)"}),h=a("<div>").addClass("svg-tag").attr("id",e.tagId).appendTo(a("body")).hide(),i=366,k=new Date,l=0;54>l;l++){var m=x("g",{transform:"translate("+12*l+",0)"}),n=new Date;n.setDate(k.getDate()-i-1);for(var o=n.getDay();7>o;o++){var p=new Date;if(p.setDate(k.getDate()-i),p.getMonth()!=j&&52>l&&o>3){var q=12;p.getDate()>7&&(q=0);var r=x("text",{x:12*l+q,y:"-6","class":"month"});r.textContent=z(p.getMonth()),g.appendChild(r),j=p.getMonth()}if(i--,i>=0||e.showToday&&i>=-1){var s=x("rect",{"class":"day",width:"10px",height:"10px","data-date":p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getDate(),y:12*o});s.onmouseover=function(){var b=a(this).attr("data-date").split("-"),c=new Date(b[0],b[1]-1,b[2]),d=B(c),e=a(this).attr("data-count"),f=a(this).attr("data-count");e=f?f>1?a(this).attr("data-count")+" scores":a(this).attr("data-count")+" score":"No scores",h.html("<b>"+e+"</b> on "+d).show().css({left:a(this).offset().left-h.outerWidth()/2+5,top:a(this).offset().top-33})},s.onmouseleave=function(){h.text("").hide()},s.onclick=function(){e.eventClick({date:a(this).attr("data-date"),count:a(this).attr("data-count")||0})},m.appendChild(s)}}g.appendChild(m)}var t=x("text",{x:"-14",y:"8"});t.textContent=A(0),g.appendChild(t);var u=x("text",{x:"-14",y:"32"});u.textContent=A(2),g.appendChild(u);var v=x("text",{x:"-14",y:"56"});v.textContent=A(4),g.appendChild(v);var w=x("text",{x:"-14",y:"80"});w.textContent=A(6),g.appendChild(w),f.appendChild(g),d.append(f),y(b)}}(jQuery);